<link rel="stylesheet" href="../css/stylestabla.css">
<table class="verification-table">
    <thead>
        <tr>
            <th>Elemento</th>
            <th>Bien</th>
            <th>Regular</th>
            <th>Mal</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Defensa Delantera</td>
            <td><input type="radio" name="exterior_defensaD" value="bien"></td>
            <td><input type="radio" name="exterior_defensaD"
                    value="regular"></td>
            <td><input type="radio" name="defensaD" value="mal"></td>
        </tr>
        <tr>
            <td>Parrilla</td>
            <td><input type="radio" name="exterior_parrilla" value="bien"></td>
            <td><input type="radio" name="exterior_parrilla"
                    value="regular"></td>
            <td><input type="radio" name="exterior_parrilla" value="mal"></td>
        </tr>
        <tr>
            <td>Luces Delanteras</td>
            <td><input type="radio" name="exterior_lucesD" value="bien"></td>
            <td><input type="radio" name="exterior_lucesD" value="regular"></td>
            <td><input type="radio" name="exterior_lucesD" value="mal"></td>
        </tr>
        <tr>
            <td>Cofre</td>
            <td><input type="radio" name="exterior_cofre" value="bien"></td>
            <td><input type="radio" name="exterior_lucesD" value="regular"></td>
            <td><input type="radio" name="exterior_cofre" value="mal"></td>
        </tr>
        <tr>
            <td>Parabrisas</td>
            <td><input type="radio" name="exterior_parabrisas"
                    value="bien"></td>
            <td><input type="radio" name="exterior_parabrisas"
                    value="regular"></td>
            <td><input type="radio" name="exterior_parabrisas" value="mal"></td>
        </tr>
        <tr>
            <td>Salpicaderas</td>
            <td><input type="radio" name="exterior_salpicaderas"
                    value="bien"></td>
            <td><input type="radio" name="exterior_salpicaderas"
                    value="regular"></td>
            <td><input type="radio" name="exterior_salpicaderas"
                    value="mal"></td>
        </tr>
        <tr>
            <td>limpiadores</td>
            <td><input type="radio" name="exterior_limpiadores"
                    value="bien"></td>
            <td><input type="radio" name="exterior_limpiadores"
                    value="regular"></td>
            <td><input type="radio" name="exterior_limpiadores"
                    value="mal"></td>
        </tr>
        <tr>
            <td>Cristales</td>
            <td><input type="radio" name="exterior_cristales" value="bien"></td>
            <td><input type="radio" name="exterior_cristales"
                    value="regular"></td>
            <td><input type="radio" name="exterior_cristales" value="mal"></td>
        </tr>
        <tr>
            <td>Llantas</td>
            <td><input type="radio" name="exterior_llantas" value="bien"></td>
            <td><input type="radio" name="exterior_llantas"
                    value="regular"></td>
            <td><input type="radio" name="exterior_llantas" value="mal"></td>
        </tr>
        <tr>
            <td>Defensa Trasera</td>
            <td><input type="radio" name="exterior_defensaT" value="bien"></td>
            <td><input type="radio" name="exterior_defensaT"
                    value="regular"></td>
            <td><input type="radio" name="exterior_defensaT" value="mal"></td>
        </tr>
        <tr>
            <td>Capazete</td>
            <td><input type="radio" name="exterior_capazete" value="bien"></td>
            <td><input type="radio" name="exterior_capazete"
                    value="regular"></td>
            <td><input type="radio" name="exterior_capazete" value="mal"></td>
        </tr>
        <tr>
            <td>Luces Posteriores</td>
            <td><input type="radio" name="exterior_lucesP" value="bien"></td>
            <td><input type="radio" name="exterior_lucesP" value="regular"></td>
            <td><input type="radio" name="exterior_lucesP" value="mal"></td>
        </tr>
        <tr>
            <td>Cajuela</td>
            <td><input type="radio" name="exterior_cajuela" value="bien"></td>
            <td><input type="radio" name="exterior_cajuela"
                    value="regular"></td>
            <td><input type="radio" name="exterior_cajuela" value="mal"></td>
        </tr>
        <tr>
            <td>Medallon</td>
            <td><input type="radio" name="exterior_medallon" value="bien"></td>
            <td><input type="radio" name="exterior_medallon"
                    value="regular"></td>
            <td><input type="radio" name="exterior_medallon" value="mal"></td>
        </tr>
        <tr>
            <td>Puertas</td>
            <td><input type="radio" name="exterior_puertas" value="bien"></td>
            <td><input type="radio" name="exterior_puertas"
                    value="regular"></td>
            <td><input type="radio" name="exterior_puertas" value="mal"></td>
        </tr>
        <tr>
            <td>Antenas</td>
            <td><input type="radio" name="exterior_antenas" value="bien"></td>
            <td><input type="radio" name="exterior_antenas"
                    value="regular"></td>
            <td><input type="radio" name="exterior_antenas" value="mal"></td>
        </tr>
        <tr>
            <td>Espejos</td>
            <td><input type="radio" name="exterior_espejos" value="bien"></td>
            <td><input type="radio" name="exterior_espejos"
                    value="regular"></td>
            <td><input type="radio" name="exterior_espejos" value="mal"></td>
        </tr>
        <tr>
            <td>Medida</td>
            <td><input type="radio" name="exterior_medida" value="bien"></td>
            <td><input type="radio" name="exterior_medida" value="regular"></td>
            <td><input type="radio" name="exterior_medida" value="mal"></td>
        </tr>
        <tr>
            <td>Birlos</td>
            <td><input type="radio" name="exterior_birlos" value="bien"></td>
            <td><input type="radio" name="exterior_birlos" value="regular"></td>
            <td><input type="radio" name="exterior_birlos" value="mal"></td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th>Observaciones</th>
            <th>Bien</th>
            <th>Regular</th>
            <th>Mal</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Motor</td>
            <td><input type="radio" name="exterior_motor" value="bien"></td>
            <td><input type="radio" name="exterior_motor" value="regular"></td>
            <td><input type="radio" name="exterior_motor" value="mal"></td>
        </tr>
        <tr>
            <td>Transmision</td>
            <td><input type="radio" name="exterior_transmicion"
                    value="bien"></td>
            <td><input type="radio" name="exterior_transmicion"
                    value="regular"></td>
            <td><input type="radio" name="exterior_transmicion"
                    value="mal"></td>
        </tr>
        <tr>
            <td>Suspension</td>
            <td><input type="radio" name="exterior_suspension"
                    value="bien"></td>
            <td><input type="radio" name="exterior_suspension"
                    value="regular"></td>
            <td><input type="radio" name="exterior_suspension" value="mal"></td>
        </tr>
        <tr>
            <td>Frenos</td>
            <td><input type="radio" name="exterior_frenos" value="bien"></td>
            <td><input type="radio" name="exterior_frenos" value="regular"></td>
            <td><input type="radio" name="exterior_frenos" value="mal"></td>
        </tr>
        <tr>
            <td>Direccion</td>
            <td><input type="radio" name="exterior_direccion" value="bien"></td>
            <td><input type="radio" name="exterior_direccion"
                    value="regular"></td>
            <td><input type="radio" name="exterior_direccion" value="mal"></td>
        </tr>
        <tr>
            <td>Sistema Electronico</td>
            <td><input type="radio" name="exterior_sistemaE" value="bien"></td>
            <td><input type="radio" name="exterior_sistemaE"
                    value="regular"></td>
            <td><input type="radio" name="exterior_sistemaE" value="mal"></td>
        </tr>
        <tr>
            <td>Bateria</td>
            <td><input type="radio" name="exterior_bateria" value="bien"></td>
            <td><input type="radio" name="exterior_bateria"
                    value="regular"></td>
            <td><input type="radio" name="exterior_bateria" value="mal"></td>
        </tr>
        <tr>
            <td>pintura</td>
            <td><input type="radio" name="exterior_pintura" value="bien"></td>
            <td><input type="radio" name="exterior_pintura"
                    value="regular"></td>
            <td><input type="radio" name="exterior_pintura" value="mal"></td>
        </tr>
        <tr>
            <td>Carroceria</td>
            <td><input type="radio" name="exterior_carroceria"
                    value="bien"></td>
            <td><input type="radio" name="exterior_carroceria"
                    value="regular"></td>
            <td><input type="radio" name="exterior_carroceria" value="mal"></td>
        </tr>
    </tbody>
</table>
<div>
    <label for="observaciones_exterior">Observaciones Exterior:</label>
    <textarea id="observaciones_exterior" name="observaciones_exterior" rows="4" cols="50"></textarea>
</div>
<script src="../JS/verificacion.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Cargar radios desde localStorage
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            let savedValue = localStorage.getItem(radio.name);
            if (savedValue && radio.value === savedValue) {
                radio.checked = true;
            }
            
            radio.addEventListener("change", function () {
                localStorage.setItem(radio.name, radio.value);
            });
        });

        // Manejo de observaciones en localStorage
        let observacionesExterior = document.getElementById("observaciones_exterior");
        
        if (localStorage.getItem("observaciones_exterior")) {
            observacionesExterior.value = localStorage.getItem("observaciones_exterior");
        }

        observacionesExterior.addEventListener("input", function () {
            localStorage.setItem("observaciones_exterior", observacionesExterior.value);
        });

        // Comunicación entre ventanas (iframe o popup)
        window.addEventListener("message", function (event) {
            if (event.data.type === "getDatos") {
                let datos = [];
                
                document.querySelectorAll('input[type="radio"]:checked').forEach(input => {
                    let categoria = input.name.includes("motor") ? "Motor" : "Exterior"; // Detecta la categoría automáticamente

                    datos.push({
                        categoria: categoria,
                        elemento: input.name.replace("exterior_", "").replace("motor_", ""),
                        estado: input.value
                    });
                });

                let observaciones = observacionesExterior.value;
                if (observaciones) {
                    datos.push({
                        categoria: "Exterior",
                        elemento: "Observaciones",
                        estado: observaciones
                    });
                }

                event.source.postMessage({ type: "respuestaDatos", datos: datos }, "*");
            }
        });
    });
</script>


